# Using a psfpython base image


FROM python:3.9.6-buster

#RUN pip install aiohttp==3.7.4.post0 antlr4-python3-runtime==4.8 argon2-cffi==20.1.0 async-timeout==3.0.1 async_generator==1.10 atlassian-python-api==3.11.0 attrs==21.2.0 backcall==0.2.0 beautifulsoup4==4.9.3 bleach==3.3.0 cffi==1.14.5 chardet==4.0.0 colorama==0.4.4 cryptography==3.4.7 cycler==0.10.0 decorator==5.0.9 defusedxml==0.7.1 deprecated==1.2.12 elasticsearch==7.13.2 entrypoints==0.3 et-xmlfile==1.1.0 fsspec==2021.6.0 idna==2.10 importlib-metadata==3.10.0 importlib_metadata==3.10.0 intel-openmp==2021.2.0 ipykernel==5.3.4 ipysheet==0.4.4 ipython==7.18.1 ipython_genutils==0.2.0 ipywidgets==7.5.1 jedi==0.17.0 jinja2==3.0.1 json5==0.9.6 jsonschema==3.2.0 jupyter_client==6.1.12 jupyter_core==4.7.1 jupyterlab==2.2.6 jupyterlab_pygments==0.1.2 jupyterlab_server==1.2.0 kiwisolver==1.3.1 libclang==11.1.0 lxml==4.6.3 markupsafe==2.0.1 matplotlib==3.4.2 mistune==0.8.4 multidict==5.1.0 nbclient==0.5.3 nbconvert==6.1.0 nbformat==5.1.3 nest-asyncio==1.5.1 notebook==6.4.0 numpy oauthlib==3.1.1 olefile==0.46 openpyxl==3.0.7 packaging==20.9 pandas==1.1.3 pandas-profiling pandocfilters==1.4.3 parso==0.8.2 pickleshare==0.7.5 pillow==8.3.0 plotly==4.11.0 prometheus_client==0.11.0 prompt-toolkit==3.0.17 pscript==0.7.5 pyarrow==4.0.1 pycparser==2.20 pygments==2.9.0 pyodbc==4.0.30 pyopenssl==20.0.1 pyparsing==2.4.7 pyrsistent==0.17.3 pysocks==1.7.1 python-dateutil==2.8.1 python-dotenv==0.18.0 python-levenshtein==0.12.2 pytz==2021.1 pywin32==227 pywinpty==0.5.7 pyzmq==20.0.0 qgrid==1.3.1 requests==2.25.1 requests-oauthlib==1.3.0 retrying==1.3.3 send2trash==1.5.0 simplejson==3.17.2 six==1.16.0 soupsieve==2.2.1 splunk-sdk==1.6.13 stix2==2.1.0 stix2-patterns==1.3.2 tabulate==0.8.9 taxii2-client==2.3.0 terminado==0.9.4 testpath==0.5.0 tornado==6.1 traitlets==5.0.5 typing-extensions==3.10.0.0 typing_extensions==3.10.0.0 urllib3==1.26.6 wcwidth==0.2.5 webencodings==0.5.1 wheel==0.36.2 widgetsnbextension==3.5.1 win_inet_pton==1.1.0 wincertstore==0.2 wrapt==1.12.1 xlsxwriter==1.4.4 yarl==1.6.3 zipp==3.4.1

RUN pip install aiohttp==3.7.4.post0 antlr4-python3-runtime==4.8 argon2-cffi==20.1.0 async-timeout==3.0.1 async_generator==1.10 atlassian-python-api==3.11.0 attrs==21.2.0 backcall==0.2.0 \ 
    beautifulsoup4==4.9.3 bleach==3.3.0 cffi==1.14.5 chardet==4.0.0 colorama==0.4.4 cryptography==3.4.7 cycler==0.10.0 decorator==5.0.9 defusedxml==0.7.1 deprecated==1.2.12 elasticsearch==7.13.2 \
    entrypoints==0.3 et-xmlfile==1.1.0 fsspec==2021.6.0 idna==2.10 importlib-metadata==3.10.0 importlib_metadata==3.10.0 intel-openmp==2021.2.0 ipykernel==5.3.4 ipysheet==0.4.4 ipython==7.18.1 \
    ipython_genutils==0.2.0 ipywidgets==7.5.1 jedi==0.17.0 jinja2==3.0.1 json5==0.9.6 jsonschema==3.2.0 jupyter_client==6.1.12 jupyter_core==4.7.1 jupyterlab==2.2.6 jupyterlab_pygments==0.1.2 \ 
    jupyterlab_server==1.2.0 kiwisolver==1.3.1 libclang==11.1.0 lxml==4.6.3 markupsafe==2.0.1 matplotlib==3.4.2 mistune==0.8.4 multidict==5.1.0 nbclient==0.5.3 nbconvert==6.1.0 nbformat==5.1.3 \ 
    nest-asyncio==1.5.1 notebook==6.4.0 numpy oauthlib==3.1.1 olefile==0.46 openpyxl==3.0.7 packaging==20.9 pandas==1.1.3 pandas-profiling pandocfilters==1.4.3 parso==0.8.2 pickleshare==0.7.5 \
    pillow==8.3.0 plotly==4.11.0 prometheus_client==0.11.0 prompt-toolkit==3.0.17 pscript==0.7.5 pyarrow==4.0.1 pycparser==2.20 pygments==2.9.0 pyodbc==4.0.30 pyopenssl==20.0.1 pyparsing==2.4.7 \
    pyrsistent==0.17.3 pysocks==1.7.1 python-dateutil==2.8.1 python-dotenv==0.18.0 python-levenshtein==0.12.2 pytz==2021.1 pyzmq==20.0.0 qgrid==1.3.1 requests==2.25.1 \
    requests-oauthlib==1.3.0 retrying==1.3.3 send2trash==1.5.0 simplejson==3.17.2 six==1.16.0 soupsieve==2.2.1 splunk-sdk==1.6.13 stix2==2.1.0 stix2-patterns==1.3.2 tabulate==0.8.9 taxii2-client==2.3.0 \
    terminado==0.9.4 testpath==0.5.0 tornado==6.1 traitlets==5.0.5 typing-extensions==3.10.0.0 typing_extensions==3.10.0.0 urllib3==1.26.6 wcwidth==0.2.5 webencodings==0.5.1 wheel==0.36.2 \
    widgetsnbextension==3.5.1 win_inet_pton==1.1.0 wincertstore==0.2 wrapt==1.12.1 xlsxwriter==1.4.4 yarl==1.6.3 zipp==3.4.1 yahoo_fin

#RUN conda install -c conda-forge elasticsearch pymysql=0.10.1 pyarrow ipysheet tabulate && conda clean --all -f -y

# Everthing here should be all good and the same as the conda one

RUN ipython profile create && jupyter lab --generate-config && \
    sed -i "s/# c.NotebookApp.iopub_data_rate_limit = 1000000/c.NotebookApp.iopub_data_rate_limit = 100000000/g" $HOME/.jupyter/jupyter_notebook_config.py

# RUN jupyter labextension install --dev-build=True @jupyter-widgets/jupyterlab-manager@2.0.0 && jupyter labextension install --dev-build=True plotlywidget@4.12.0 && \
#    jupyter labextension install --dev-build=True jupyterlab-plotly@4.12.0 && jupyter labextension install --dev-build=True qgrid2@1.1.3 && \
#    jupyter labextension install --dev-build=True ipysheet &&  conda clean --all -f -y && npm cache clean --force

RUN git clone https://github.com/johnomernik/jupyter_integration_base && cd jupyter_integration_base && python setup.py install && cd .. && rm -rf ./jupyter_integration_base
RUN git clone https://github.com/johnomernik/jupyter_splunk && cd jupyter_splunk && python setup.py install && cd .. && rm -rf ./jupyter_splunk
RUN git clone https://github.com/johnomernik/jupyter_drill && cd jupyter_drill && python setup.py install && cd .. && rm -rf ./jupyter_drill
RUN git clone https://github.com/johnomernik/jupyter_pyodbc && cd jupyter_pyodbc && python setup.py install && cd .. && rm -rf ./jupyter_pyodbc
RUN git clone https://github.com/johnomernik/jupyter_impala && cd jupyter_impala && python setup.py install && cd .. && rm -rf ./jupyter_impala
RUN git clone https://github.com/johnomernik/jupyter_hive && cd jupyter_hive && python setup.py install && cd .. && rm -rf ./jupyter_hive
RUN git clone https://github.com/johnomernik/jupyter_tera && cd jupyter_tera && python setup.py install && cd .. && rm -rf ./jupyter_tera
RUN git clone https://github.com/johnomernik/jupyter_es && cd jupyter_es && python setup.py install && cd .. && rm -rf ./jupyter_es
RUN git clone https://github.com/johnomernik/jupyter_mysql && cd jupyter_mysql && python setup.py install && cd .. && rm -rf ./jupyter_mysql
RUN git clone https://github.com/johnomernik/jupyter_taxii && cd jupyter_taxii && python setup.py install && cd .. && rm -rf ./jupyter_taxii

ADD startup_files.sh /root/
RUN /root/startup_files.sh



